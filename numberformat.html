<!DOCTYPE html>
<html>

<head>
  <title>Number Input Format Example</title>
</head>

<body>
  <input type="text" id="inputNumber" />
  <button id="saveButton">Save</button>
  <div id="output"></div>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>
    $(document).ready(function () {
      // ฟังก์ชันสำหรับการแปลงตัวเลขให้เป็นรูปแบบ "1,000.00"
      function formatNumber(number) {
        return parseFloat(number).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ",");
      }

      // ฟังก์ชันสำหรับการกู้ค่าตัวเลขที่ถูกต้องเพื่อนำไปใช้งานต่อ
      function getNumberFromFormattedString(formattedString) {
        return parseFloat(formattedString.replace(/,/g, "").replace(/[^\d.]/g, "")) || 0; // ให้คืนค่า 0 หากไม่สามารถแปลงเป็นตัวเลขได้
      }

      // กดปุ่ม Save แสดงค่าที่ได้รับจาก input ที่มีรูปแบบ "1,000.00"
      $("#saveButton").on("click", function () {
        var inputVal = $("#inputNumber").val();
        $("#output").text(formatNumber(inputVal));
      });

      // รีเซ็ตค่าใน input เมื่อพิมพ์ตัวเลข และลบตัวอักษรที่ไม่ใช่ตัวเลขและจุดทศนิยม
      $("#inputNumber").on("input", function () {
        var inputVal = $(this).val();
        var formattedValue = formatNumber(getNumberFromFormattedString(inputVal));
        $(this).val(formattedValue);
      });
    });
  </script>
</body>

</html>
